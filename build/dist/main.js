function S(){}function Me(t){return t&&typeof t=="object"&&typeof t.then=="function"}function pe(t){return t()}function _e(){return Object.create(null)}function O(t){t.forEach(pe)}function Re(t){return typeof t=="function"}function M(t,e){return t!=t?e==e:t!==e||t&&typeof t=="object"||typeof t=="function"}function Qe(t){return Object.keys(t).length===0}function g(t,e){t.appendChild(e)}function C(t,e,l){t.insertBefore(e,l||null)}function $(t){t.parentNode.removeChild(t)}function L(t,e){for(let l=0;l<t.length;l+=1)t[l]&&t[l].d(e)}function v(t){return document.createElement(t)}function E(t){return document.createTextNode(t)}function j(){return E(" ")}function W(){return E("")}function q(t,e,l,n){return t.addEventListener(e,l,n),()=>t.removeEventListener(e,l,n)}function ne(t){return function(e){return e.preventDefault(),t.call(this,e)}}function f(t,e,l){l==null?t.removeAttribute(e):t.getAttribute(e)!==l&&t.setAttribute(e,l)}function Ue(t){return Array.from(t.childNodes)}function N(t,e){e=""+e,t.wholeText!==e&&(t.data=e)}function X(t,e){t.value=e??""}function ae(t,e,l,n){l===null?t.style.removeProperty(e):t.style.setProperty(e,l,n?"important":"")}function I(t,e,l){t.classList[l?"add":"remove"](e)}function Je(t,e,l=!1){let n=document.createEvent("CustomEvent");return n.initCustomEvent(t,l,!1,e),n}var U;function B(t){U=t}function he(){if(!U)throw new Error("Function called outside component initialization");return U}function se(){let t=he();return(e,l)=>{let n=t.$$.callbacks[e];if(n){let a=Je(e,l);n.slice().forEach(o=>{o.call(t,a)})}}}var J=[],me=[],Y=[],ge=[],Ve=Promise.resolve(),oe=!1;function Ge(){oe||(oe=!0,Ve.then(re))}function ce(t){Y.push(t)}var ie=new Set,Z=0;function re(){let t=U;do{for(;Z<J.length;){let e=J[Z];Z++,B(e),He(e.$$)}for(B(null),J.length=0,Z=0;me.length;)me.pop()();for(let e=0;e<Y.length;e+=1){let l=Y[e];ie.has(l)||(ie.add(l),l())}Y.length=0}while(J.length);for(;ge.length;)ge.pop()();oe=!1,ie.clear(),B(t)}function He(t){if(t.fragment!==null){t.update(),O(t.before_update);let e=t.dirty;t.dirty=[-1],t.fragment&&t.fragment.p(t.ctx,e),t.after_update.forEach(ce)}}var x=new Set,R;function V(){R={r:0,c:[],p:R}}function G(){R.r||O(R.c),R=R.p}function A(t,e){t&&t.i&&(x.delete(t),t.i(e))}function P(t,e,l,n){if(t&&t.o){if(x.has(t))return;x.add(t),R.c.push(()=>{x.delete(t),n&&(l&&t.d(1),n())}),t.o(e)}}function ee(t,e){let l=e.token={};function n(a,o,s,r){if(e.token!==l)return;e.resolved=r;let i=e.ctx;s!==void 0&&(i=i.slice(),i[s]=r);let c=a&&(e.current=a)(i),_=!1;e.block&&(e.blocks?e.blocks.forEach((d,m)=>{m!==o&&d&&(V(),P(d,1,1,()=>{e.blocks[m]===d&&(e.blocks[m]=null)}),G())}):e.block.d(1),c.c(),A(c,1),c.m(e.mount(),e.anchor),_=!0),e.block=c,e.blocks&&(e.blocks[o]=c),_&&re()}if(Me(t)){let a=he();if(t.then(o=>{B(a),n(e.then,1,e.value,o),B(null)},o=>{if(B(a),n(e.catch,2,e.error,o),B(null),!e.hasCatch)throw o}),e.current!==e.pending)return n(e.pending,0),!0}else{if(e.current!==e.then)return n(e.then,1,e.value,t),!0;e.resolved=t}}function ue(t,e,l){let n=e.slice(),{resolved:a}=t;t.current===t.then&&(n[t.value]=a),t.current===t.catch&&(n[t.error]=a),t.block.p(n,l)}var fe=typeof window!="undefined"?window:typeof globalThis!="undefined"?globalThis:global;function te(t){t&&t.c()}function H(t,e,l,n){let{fragment:a,on_mount:o,on_destroy:s,after_update:r}=t.$$;a&&a.m(e,l),n||ce(()=>{let i=o.map(pe).filter(Re);s?s.push(...i):O(i),t.$$.on_mount=[]}),r.forEach(ce)}function K(t,e){let l=t.$$;l.fragment!==null&&(O(l.on_destroy),l.fragment&&l.fragment.d(e),l.on_destroy=l.fragment=null,l.ctx=[])}function Ke(t,e){t.$$.dirty[0]===-1&&(J.push(t),Ge(),t.$$.dirty.fill(0)),t.$$.dirty[e/31|0]|=1<<e%31}function Q(t,e,l,n,a,o,s,r=[-1]){let i=U;B(t);let c=t.$$={fragment:null,ctx:null,props:o,update:S,not_equal:a,bound:_e(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(e.context||(i?i.$$.context:[])),callbacks:_e(),dirty:r,skip_bound:!1,root:e.target||i.$$.root};s&&s(c.root);let _=!1;if(c.ctx=l?l(t,e.props||{},(d,m,...p)=>{let w=p.length?p[0]:m;return c.ctx&&a(c.ctx[d],c.ctx[d]=w)&&(!c.skip_bound&&c.bound[d]&&c.bound[d](w),_&&Ke(t,d)),m}):[],c.update(),_=!0,O(c.before_update),c.fragment=n?n(c.ctx):!1,e.target){if(e.hydrate){let d=Ue(e.target);c.fragment&&c.fragment.l(d),d.forEach($)}else c.fragment&&c.fragment.c();e.intro&&A(t.$$.fragment),H(t,e.target,e.anchor,e.customElement),re()}B(i)}var T=class{$destroy(){K(this,1),this.$destroy=S}$on(e,l){let n=this.$$.callbacks[e]||(this.$$.callbacks[e]=[]);return n.push(l),()=>{let a=n.indexOf(l);a!==-1&&n.splice(a,1)}}$set(e){this.$$set&&!Qe(e)&&(this.$$.skip_bound=!0,this.$$set(e),this.$$.skip_bound=!1)}};var de=class{constructor(e,l){this.url=new URL("/api/search",e);let n={sort:"date",order:"desc",type:"dataset",per_page:10,show_facets:!1};this.params=Object.assign(n,l),this.url.search=new URLSearchParams(this.params)}async getItems(e,l){this.params.q||(this.params.q=""),e||(e="");let n="";this.params.q&&e?n=[this.params.q,e].join(" AND "):n=this.params.q+e,(!n||n==="")&&(n="*"),this.url.searchParams.set("q",n),this.url.searchParams.set("start",(l*this.params.per_page).toString());let a=await fetch(this.url.toString()),o=await a.json();if(console.log(this.url.toString()),console.log(o),a.status===200){let s={items:o.data.items,itemCount:o.data.total_count,pageCount:Math.ceil(o.data.total_count/this.params.per_page),status:a.status};if(this.params.show_facets){let r=[];for(let[i,c]of Object.entries(o.data.facets[0])){let _=[];for(let[d,m]of c.labels.entries()){let p=Object.keys(m)[0],w=`${i.replace(/_ss$/,"")}:"${p}"`;e.includes(w)||_.push({key:`${i}-${d}`,queryName:w,name:p,count:Object.values(m)[0]})}_.length>0&&r.push({key:i,name:c.friendly,values:_})}s.facets=r}return console.log(s),s}else throw new Error("API call failed.")}},be=de;function ke(t,e,l){let n=t.slice();return n[4]=e[l],n}function ve(t,e,l){let n=t.slice();return n[7]=e[l],n}function ye(t){let e,l,n,a,o,s=t[7].name+"",r,i,c,_=t[7].count+"",d,m,p,w,b;function u(){return t[2](t[7])}return{c(){e=v("div"),l=v("input"),a=j(),o=v("label"),r=E(s),i=j(),c=v("span"),d=E(_),p=j(),f(l,"type","checkbox"),f(l,"class","form-check-input"),f(l,"id",n=t[7].key),f(c,"class","badge rounded-pill bg-light text-dark"),f(o,"class","form-check-label"),f(o,"for",m=t[7].key),f(e,"class","mb-3 form-check")},m(h,k){C(h,e,k),g(e,l),g(e,a),g(e,o),g(o,r),g(o,i),g(o,c),g(c,d),g(e,p),w||(b=q(l,"click",u),w=!0)},p(h,k){t=h,k&1&&n!==(n=t[7].key)&&f(l,"id",n),k&1&&s!==(s=t[7].name+"")&&N(r,s),k&1&&_!==(_=t[7].count+"")&&N(d,_),k&1&&m!==(m=t[7].key)&&f(o,"for",m)},d(h){h&&$(e),w=!1,b()}}}function we(t){let e,l,n,a=t[4].name+"",o,s,r,i,c,_,d,m,p,w,b=t[4].values,u=[];for(let h=0;h<b.length;h+=1)u[h]=ye(ve(t,b,h));return{c(){e=v("div"),l=v("h2"),n=v("button"),o=E(a),c=j(),_=v("div"),d=v("div");for(let h=0;h<u.length;h+=1)u[h].c();w=j(),f(n,"class","accordion-button collapsed"),f(n,"type","button"),f(n,"data-bs-toggle","collapse"),f(n,"data-bs-target",s="#"+t[4].key+"-collapse"),f(n,"aria-expanded","false"),f(n,"aria-controls",r=""+(t[4].key+"-collapse")),f(l,"class","accordion-header"),f(l,"id",i=t[4].key),f(d,"class","accordion-body"),f(_,"id",m=""+(t[4].key+"-collapse")),f(_,"class","accordion-collapse collapse"),f(_,"aria-labelledby",p=t[4].key),f(_,"data-bs-parent","#filters"),f(e,"class","accordion-item")},m(h,k){C(h,e,k),g(e,l),g(l,n),g(n,o),g(e,c),g(e,_),g(_,d);for(let y=0;y<u.length;y+=1)u[y].m(d,null);g(e,w)},p(h,k){if(k&1&&a!==(a=h[4].name+"")&&N(o,a),k&1&&s!==(s="#"+h[4].key+"-collapse")&&f(n,"data-bs-target",s),k&1&&r!==(r=""+(h[4].key+"-collapse"))&&f(n,"aria-controls",r),k&1&&i!==(i=h[4].key)&&f(l,"id",i),k&3){b=h[4].values;let y;for(y=0;y<b.length;y+=1){let F=ve(h,b,y);u[y]?u[y].p(F,k):(u[y]=ye(F),u[y].c(),u[y].m(d,null))}for(;y<u.length;y+=1)u[y].d(1);u.length=b.length}k&1&&m!==(m=""+(h[4].key+"-collapse"))&&f(_,"id",m),k&1&&p!==(p=h[4].key)&&f(_,"aria-labelledby",p)},d(h){h&&$(e),L(u,h)}}}function We(t){let e,l=t[0],n=[];for(let a=0;a<l.length;a+=1)n[a]=we(ke(t,l,a));return{c(){e=v("form");for(let a=0;a<n.length;a+=1)n[a].c();f(e,"class","accordion mb-5"),f(e,"id","filters")},m(a,o){C(a,e,o);for(let s=0;s<n.length;s+=1)n[s].m(e,null)},p(a,[o]){if(o&3){l=a[0];let s;for(s=0;s<l.length;s+=1){let r=ke(a,l,s);n[s]?n[s].p(r,o):(n[s]=we(r),n[s].c(),n[s].m(e,null))}for(;s<n.length;s+=1)n[s].d(1);n.length=l.length}},i:S,o:S,d(a){a&&$(e),L(n,a)}}}function Xe(t,e,l){let{data:n}=e,a=se();function o(r){a("message",{key:r})}let s=r=>o(r.queryName);return t.$$set=r=>{"data"in r&&l(0,n=r.data)},[n,o,s]}var $e=class extends T{constructor(e){super();Q(this,e,Xe,We,M,{data:0})}},Ce=$e;function Ye(t){let e,l,n,a=t[0].name+"",o,s,r,i=t[0].citation+"",c,_,d,m=t[0].description+"",p,w,b,u,h,k,y,F=t[0].global_id+"",le;return{c(){e=v("div"),l=v("div"),n=v("h5"),o=E(a),s=j(),r=v("h6"),c=E(i),_=j(),d=v("p"),p=E(m),w=j(),b=v("a"),u=E("View"),k=j(),y=v("div"),le=E(F),f(n,"class","card-title"),f(r,"class","card-subtitle mb-3 text-muted"),f(d,"class","card-text"),f(b,"href",h=t[0].url),f(b,"class","btn btn-primary"),f(l,"class","card-body"),f(y,"class","card-footer text-muted"),f(e,"class","card")},m(D,z){C(D,e,z),g(e,l),g(l,n),g(n,o),g(l,s),g(l,r),g(r,c),g(l,_),g(l,d),g(d,p),g(l,w),g(l,b),g(b,u),g(e,k),g(e,y),g(y,le)},p(D,[z]){z&1&&a!==(a=D[0].name+"")&&N(o,a),z&1&&i!==(i=D[0].citation+"")&&N(c,i),z&1&&m!==(m=D[0].description+"")&&N(p,m),z&1&&h!==(h=D[0].url)&&f(b,"href",h),z&1&&F!==(F=D[0].global_id+"")&&N(le,F)},i:S,o:S,d(D){D&&$(e)}}}var je=400;function Ze(t,e,l){let{data:n}=e;return n.description.length>je&&(n.description=`${n.description.slice(0,je).trim()}...`),t.$$set=a=>{"data"in a&&l(0,n=a.data)},[n]}var Ee=class extends T{constructor(e){super();Q(this,e,Ze,Ye,M,{data:0})}},Se=Ee;var{Boolean:xe}=fe;function Ne(t,e,l){let n=t.slice();return n[17]=e[l],n[19]=l,n}function Ae(t,e,l){let n=t.slice();return n[20]=e[l],n}function qe(t,e,l){let n=t.slice();return n[24]=e[l],n}function Pe(t){let e,l,n,a,o,s;return{c(){e=v("form"),l=v("input"),n=j(),a=v("button"),a.textContent="Search",f(l,"class","form-control"),f(l,"type","text"),f(l,"placeholder","Search..."),f(a,"class","btn btn-primary"),f(e,"class","input-group input-group-lg mb-3")},m(r,i){C(r,e,i),g(e,l),X(l,t[2]),g(e,n),g(e,a),o||(s=[q(l,"input",t[9]),q(e,"submit",ne(t[5]))],o=!0)},p(r,i){i&4&&l.value!==r[2]&&X(l,r[2])},d(r){r&&$(e),o=!1,O(s)}}}function De(t){let e,l=t[3],n=[];for(let a=0;a<l.length;a+=1)n[a]=Fe(qe(t,l,a));return{c(){e=v("p");for(let a=0;a<n.length;a+=1)n[a].c();f(e,"class","d-flex flex-wrap"),ae(e,"gap","0.5rem")},m(a,o){C(a,e,o);for(let s=0;s<n.length;s+=1)n[s].m(e,null)},p(a,o){if(o&72){l=a[3];let s;for(s=0;s<l.length;s+=1){let r=qe(a,l,s);n[s]?n[s].p(r,o):(n[s]=Fe(r),n[s].c(),n[s].m(e,null))}for(;s<n.length;s+=1)n[s].d(1);n.length=l.length}},d(a){a&&$(e),L(n,a)}}}function Fe(t){let e,l=t[24]+"",n,a,o,s,r,i;function c(){return t[10](t[24])}return{c(){e=v("span"),n=E(l),a=j(),o=v("button"),s=j(),f(o,"type","button"),f(o,"class","btn-close btn-close-white ms-1"),f(o,"aria-label","Remove"),f(e,"class","badge bg-secondary rounded-pill")},m(_,d){C(_,e,d),g(e,n),g(e,a),g(e,o),g(e,s),r||(i=q(o,"click",c),r=!0)},p(_,d){t=_,d&8&&l!==(l=t[24]+"")&&N(n,l)},d(_){_&&$(e),r=!1,i()}}}function et(t){let e,l=t[23]+"",n;return{c(){e=v("p"),n=E(l)},m(a,o){C(a,e,o),g(e,n)},p(a,o){o&16&&l!==(l=a[23]+"")&&N(n,l)},i:S,o:S,d(a){a&&$(e)}}}function tt(t){let e,l,n=t[16].itemCount+"",a,o,s,r,i,c,_,d=t[0].params.show_facets&&!t[0].hideSearch&&Oe(t),m=t[16].items,p=[];for(let u=0;u<m.length;u+=1)p[u]=Be(Ae(t,m,u));let w=u=>P(p[u],1,1,()=>{p[u]=null}),b=t[16].pageCount>1&&Le(t);return{c(){d&&d.c(),e=j(),l=v("p"),a=E(n),o=E(" items"),s=j(),r=v("ul");for(let u=0;u<p.length;u+=1)p[u].c();i=j(),b&&b.c(),c=W(),f(r,"class","list-unstyled")},m(u,h){d&&d.m(u,h),C(u,e,h),C(u,l,h),g(l,a),g(l,o),C(u,s,h),C(u,r,h);for(let k=0;k<p.length;k+=1)p[k].m(r,null);C(u,i,h),b&&b.m(u,h),C(u,c,h),_=!0},p(u,h){if(u[0].params.show_facets&&!u[0].hideSearch?d?(d.p(u,h),h&1&&A(d,1)):(d=Oe(u),d.c(),A(d,1),d.m(e.parentNode,e)):d&&(V(),P(d,1,1,()=>{d=null}),G()),(!_||h&16)&&n!==(n=u[16].itemCount+"")&&N(a,n),h&16){m=u[16].items;let k;for(k=0;k<m.length;k+=1){let y=Ae(u,m,k);p[k]?(p[k].p(y,h),A(p[k],1)):(p[k]=Be(y),p[k].c(),A(p[k],1),p[k].m(r,null))}for(V(),k=m.length;k<p.length;k+=1)w(k);G()}u[16].pageCount>1?b?b.p(u,h):(b=Le(u),b.c(),b.m(c.parentNode,c)):b&&(b.d(1),b=null)},i(u){if(!_){A(d);for(let h=0;h<m.length;h+=1)A(p[h]);_=!0}},o(u){P(d),p=p.filter(xe);for(let h=0;h<p.length;h+=1)P(p[h]);_=!1},d(u){d&&d.d(u),u&&$(e),u&&$(l),u&&$(s),u&&$(r),L(p,u),u&&$(i),b&&b.d(u),u&&$(c)}}}function Oe(t){let e,l;return e=new Ce({props:{data:t[16].facets}}),e.$on("message",t[7]),{c(){te(e.$$.fragment)},m(n,a){H(e,n,a),l=!0},p(n,a){let o={};a&16&&(o.data=n[16].facets),e.$set(o)},i(n){l||(A(e.$$.fragment,n),l=!0)},o(n){P(e.$$.fragment,n),l=!1},d(n){K(e,n)}}}function Be(t){let e,l,n;return l=new Se({props:{data:t[20]}}),{c(){e=v("li"),te(l.$$.fragment),f(e,"class","mb-3")},m(a,o){C(a,e,o),H(l,e,null),n=!0},p(a,o){let s={};o&16&&(s.data=a[20]),l.$set(s)},i(a){n||(A(l.$$.fragment,a),n=!0)},o(a){P(l.$$.fragment,a),n=!1},d(a){a&&$(e),K(l)}}}function Le(t){let e,l,n,a,o,s,r,i,c,_,d=Array(t[16].pageCount),m=[];for(let p=0;p<d.length;p+=1)m[p]=Ie(Ne(t,d,p));return{c(){e=v("nav"),l=v("ul"),n=v("li"),a=v("a"),a.textContent="Previous",o=j();for(let p=0;p<m.length;p+=1)m[p].c();s=j(),r=v("li"),i=v("a"),i.textContent="Next",f(a,"class","page-link"),f(a,"href","#"),f(n,"class","page-item"),I(n,"disabled",t[1]<=0),f(i,"class","page-link"),f(i,"href","#"),f(r,"class","page-item"),I(r,"disabled",t[1]>=t[16].pageCount-1),f(l,"class","pagination"),f(e,"class","overflow-auto")},m(p,w){C(p,e,w),g(e,l),g(l,n),g(n,a),g(l,o);for(let b=0;b<m.length;b+=1)m[b].m(l,null);g(l,s),g(l,r),g(r,i),c||(_=[q(a,"click",t[11]),q(i,"click",t[13])],c=!0)},p(p,w){if(w&2&&I(n,"disabled",p[1]<=0),w&18){d=Array(p[16].pageCount);let b;for(b=0;b<d.length;b+=1){let u=Ne(p,d,b);m[b]?m[b].p(u,w):(m[b]=Ie(u),m[b].c(),m[b].m(l,s))}for(;b<m.length;b+=1)m[b].d(1);m.length=d.length}w&18&&I(r,"disabled",p[1]>=p[16].pageCount-1)},d(p){p&&$(e),L(m,p),c=!1,O(_)}}}function Ie(t){let e,l,n=t[19]+1+"",a,o,s;function r(){return t[12](t[19])}return{c(){e=v("li"),l=v("a"),a=E(n),f(l,"class","page-link"),f(l,"href","#"),f(e,"class","page-item"),I(e,"active",t[1]===t[19])},m(i,c){C(i,e,c),g(e,l),g(l,a),o||(s=q(l,"click",r),o=!0)},p(i,c){t=i,c&2&&I(e,"active",t[1]===t[19])},d(i){i&&$(e),o=!1,s()}}}function lt(t){let e;return{c(){e=v("div"),f(e,"class","spinner-border text-primary mb-3")},m(l,n){C(l,e,n)},p:S,i:S,o:S,d(l){l&&$(e)}}}function nt(t){let e,l,n,a,o,s=!t[0].hideSearch&&Pe(t),r=t[3].length>=1&&De(t),i={ctx:t,current:null,token:null,hasCatch:!0,pending:lt,then:tt,catch:et,value:16,error:23,blocks:[,,,]};return ee(a=t[4],i),{c(){s&&s.c(),e=j(),r&&r.c(),l=j(),n=W(),i.block.c()},m(c,_){s&&s.m(c,_),C(c,e,_),r&&r.m(c,_),C(c,l,_),C(c,n,_),i.block.m(c,i.anchor=_),i.mount=()=>n.parentNode,i.anchor=n,o=!0},p(c,[_]){t=c,t[0].hideSearch?s&&(s.d(1),s=null):s?s.p(t,_):(s=Pe(t),s.c(),s.m(e.parentNode,e)),t[3].length>=1?r?r.p(t,_):(r=De(t),r.c(),r.m(l.parentNode,l)):r&&(r.d(1),r=null),i.ctx=t,_&16&&a!==(a=t[4])&&ee(a,i)||ue(i,t,_)},i(c){o||(A(i.block),o=!0)},o(c){for(let _=0;_<3;_+=1){let d=i.blocks[_];P(d)}o=!1},d(c){s&&s.d(c),c&&$(e),r&&r.d(c),c&&$(l),c&&$(n),i.block.d(c),i.token=null,i=null}}}function at(t,e,l){let n,{settings:a}=e,o=new be(a.domain,a.params);function s(){l(1,p=0),l(8,_=[...m,d].filter(Boolean).join(" AND "))}function r(y){l(3,m=[...m,y]),s()}function i(y){l(3,m=m.filter(F=>F!==y)),s()}function c(y){r(y.detail.key)}let _="",d="",m=[],p=0;function w(){d=this.value,l(2,d)}let b=y=>i(y),u=()=>l(1,p-=1),h=y=>l(1,p=y),k=()=>l(1,p+=1);return t.$$set=y=>{"settings"in y&&l(0,a=y.settings)},t.$$.update=()=>{if(t.$$.dirty&258){e:l(4,n=o.getItems(_,p))}},[a,p,d,m,n,s,i,c,_,w,b,u,h,k]}var Te=class extends T{constructor(e){super();Q(this,e,at,nt,M,{settings:0})}},ze=Te;function st(t,e){new ze({target:t,props:{settings:e}})}var ot=st;export{ot as default};
