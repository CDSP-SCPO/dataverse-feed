function S(){}function ze(t){return t&&typeof t=="object"&&typeof t.then=="function"}function _e(t){return t()}function pe(){return Object.create(null)}function D(t){t.forEach(_e)}function Me(t){return typeof t=="function"}function M(t,e){return t!=t?e==e:t!==e||t&&typeof t=="object"||typeof t=="function"}function Re(t){return Object.keys(t).length===0}function g(t,e){t.appendChild(e)}function C(t,e,l){t.insertBefore(e,l||null)}function $(t){t.parentNode.removeChild(t)}function B(t,e){for(let l=0;l<t.length;l+=1)t[l]&&t[l].d(e)}function y(t){return document.createElement(t)}function E(t){return document.createTextNode(t)}function j(){return E(" ")}function K(){return E("")}function F(t,e,l,n){return t.addEventListener(e,l,n),()=>t.removeEventListener(e,l,n)}function le(t){return function(e){return e.preventDefault(),t.call(this,e)}}function f(t,e,l){l==null?t.removeAttribute(e):t.getAttribute(e)!==l&&t.setAttribute(e,l)}function Ue(t){return Array.from(t.childNodes)}function N(t,e){e=""+e,t.wholeText!==e&&(t.data=e)}function W(t,e){t.value=e??""}function ne(t,e,l,n){t.style.setProperty(e,l,n?"important":"")}function L(t,e,l){t.classList[l?"add":"remove"](e)}function Je(t,e,l=!1){let n=document.createEvent("CustomEvent");return n.initCustomEvent(t,l,!1,e),n}var X;function I(t){X=t}function he(){if(!X)throw new Error("Function called outside component initialization");return X}function se(){let t=he();return(e,l)=>{let n=t.$$.callbacks[e];if(n){let s=Je(e,l);n.slice().forEach(o=>{o.call(t,s)})}}}var J=[],me=[],Y=[],ge=[],Qe=Promise.resolve(),ae=!1;function Ve(){ae||(ae=!0,Qe.then(oe))}function re(t){Y.push(t)}var ce=!1,ie=new Set;function oe(){if(!ce){ce=!0;do{for(let t=0;t<J.length;t+=1){let e=J[t];I(e),Ge(e.$$)}for(I(null),J.length=0;me.length;)me.pop()();for(let t=0;t<Y.length;t+=1){let e=Y[t];ie.has(e)||(ie.add(e),e())}Y.length=0}while(J.length);for(;ge.length;)ge.pop()();ae=!1,ce=!1,ie.clear()}}function Ge(t){if(t.fragment!==null){t.update(),D(t.before_update);let e=t.dirty;t.dirty=[-1],t.fragment&&t.fragment.p(t.ctx,e),t.after_update.forEach(re)}}var Z=new Set,R;function Q(){R={r:0,c:[],p:R}}function V(){R.r||D(R.c),R=R.p}function A(t,e){t&&t.i&&(Z.delete(t),t.i(e))}function P(t,e,l,n){if(t&&t.o){if(Z.has(t))return;Z.add(t),R.c.push(()=>{Z.delete(t),n&&(l&&t.d(1),n())}),t.o(e)}}function x(t,e){let l=e.token={};function n(s,o,a,_){if(e.token!==l)return;e.resolved=_;let m=e.ctx;a!==void 0&&(m=m.slice(),m[a]=_);let p=s&&(e.current=s)(m),b=!1;e.block&&(e.blocks?e.blocks.forEach((u,c)=>{c!==o&&u&&(Q(),P(u,1,1,()=>{e.blocks[c]===u&&(e.blocks[c]=null)}),V())}):e.block.d(1),p.c(),A(p,1),p.m(e.mount(),e.anchor),b=!0),e.block=p,e.blocks&&(e.blocks[o]=p),b&&oe()}if(ze(t)){let s=he();if(t.then(o=>{I(s),n(e.then,1,e.value,o),I(null)},o=>{if(I(s),n(e.catch,2,e.error,o),I(null),!e.hasCatch)throw o}),e.current!==e.pending)return n(e.pending,0),!0}else{if(e.current!==e.then)return n(e.then,1,e.value,t),!0;e.resolved=t}}function ue(t,e,l){let n=e.slice(),{resolved:s}=t;t.current===t.then&&(n[t.value]=s),t.current===t.catch&&(n[t.error]=s),t.block.p(n,l)}var fe=typeof window!="undefined"?window:typeof globalThis!="undefined"?globalThis:global;function ee(t){t&&t.c()}function G(t,e,l,n){let{fragment:s,on_mount:o,on_destroy:a,after_update:_}=t.$$;s&&s.m(e,l),n||re(()=>{let m=o.map(_e).filter(Me);a?a.push(...m):D(m),t.$$.on_mount=[]}),_.forEach(re)}function H(t,e){let l=t.$$;l.fragment!==null&&(D(l.on_destroy),l.fragment&&l.fragment.d(e),l.on_destroy=l.fragment=null,l.ctx=[])}function He(t,e){t.$$.dirty[0]===-1&&(J.push(t),Ve(),t.$$.dirty.fill(0)),t.$$.dirty[e/31|0]|=1<<e%31}function U(t,e,l,n,s,o,a,_=[-1]){let m=X;I(t);let p=t.$$={fragment:null,ctx:null,props:o,update:S,not_equal:s,bound:pe(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(e.context||(m?m.$$.context:[])),callbacks:pe(),dirty:_,skip_bound:!1,root:e.target||m.$$.root};a&&a(p.root);let b=!1;if(p.ctx=l?l(t,e.props||{},(u,c,...r)=>{let v=r.length?r[0]:c;return p.ctx&&s(p.ctx[u],p.ctx[u]=v)&&(!p.skip_bound&&p.bound[u]&&p.bound[u](v),b&&He(t,u)),c}):[],p.update(),b=!0,D(p.before_update),p.fragment=n?n(p.ctx):!1,e.target){if(e.hydrate){let u=Ue(e.target);p.fragment&&p.fragment.l(u),u.forEach($)}else p.fragment&&p.fragment.c();e.intro&&A(t.$$.fragment),G(t,e.target,e.anchor,e.customElement),oe()}I(m)}var T=class{$destroy(){H(this,1),this.$destroy=S}$on(e,l){let n=this.$$.callbacks[e]||(this.$$.callbacks[e]=[]);return n.push(l),()=>{let s=n.indexOf(l);s!==-1&&n.splice(s,1)}}$set(e){this.$$set&&!Re(e)&&(this.$$.skip_bound=!0,this.$$set(e),this.$$.skip_bound=!1)}};var de=class{constructor(e,l){this.url=new URL("/api/search",e);let n={sort:"date",order:"desc",type:"dataset",per_page:10,show_facets:!1};this.params=Object.assign(n,l),this.url.search=new URLSearchParams(this.params)}async getItems(e,l){(!e||e==="")&&(e="*"),this.url.searchParams.set("q",e),this.url.searchParams.set("start",(l*this.params.per_page).toString());let n=await fetch(this.url.toString()),s=await n.json();if(console.log(this.url.toString()),console.log(s),n.status===200){let o={items:s.data.items,itemCount:s.data.total_count,pageCount:Math.ceil(s.data.total_count/this.params.per_page),status:n.status};if(this.params.show_facets){let a=[];for(let[_,m]of Object.entries(s.data.facets[0])){let p=[];for(let[b,u]of m.labels.entries()){let c=Object.keys(u)[0],r=`${_}:"${c}"`;e.includes(r)||p.push({key:`${_}-${b}`,queryName:r,name:c,count:Object.values(u)[0]})}p.length>0&&a.push({key:_,name:m.friendly,values:p})}o.facets=a}return console.log(o),o}else throw new Error("API call failed.")}},be=de;function ke(t,e,l){let n=t.slice();return n[4]=e[l],n}function ve(t,e,l){let n=t.slice();return n[7]=e[l],n}function ye(t){let e,l,n,s,o,a=t[7].name+"",_,m,p,b=t[7].count+"",u,c,r,v,d;function i(){return t[2](t[7])}return{c(){e=y("div"),l=y("input"),s=j(),o=y("label"),_=E(a),m=j(),p=y("span"),u=E(b),r=j(),f(l,"type","checkbox"),f(l,"class","form-check-input"),f(l,"id",n=t[7].key),f(p,"class","badge rounded-pill bg-light text-dark"),f(o,"class","form-check-label"),f(o,"for",c=t[7].key),f(e,"class","mb-3 form-check")},m(h,k){C(h,e,k),g(e,l),g(e,s),g(e,o),g(o,_),g(o,m),g(o,p),g(p,u),g(e,r),v||(d=F(l,"click",i),v=!0)},p(h,k){t=h,k&1&&n!==(n=t[7].key)&&f(l,"id",n),k&1&&a!==(a=t[7].name+"")&&N(_,a),k&1&&b!==(b=t[7].count+"")&&N(u,b),k&1&&c!==(c=t[7].key)&&f(o,"for",c)},d(h){h&&$(e),v=!1,d()}}}function we(t){let e,l,n,s=t[4].name+"",o,a,_,m,p,b,u,c,r,v,d=t[4].values,i=[];for(let h=0;h<d.length;h+=1)i[h]=ye(ve(t,d,h));return{c(){e=y("div"),l=y("h2"),n=y("button"),o=E(s),p=j(),b=y("div"),u=y("div");for(let h=0;h<i.length;h+=1)i[h].c();v=j(),f(n,"class","accordion-button collapsed"),f(n,"type","button"),f(n,"data-bs-toggle","collapse"),f(n,"data-bs-target",a="#"+t[4].key+"-collapse"),f(n,"aria-expanded","false"),f(n,"aria-controls",_=""+(t[4].key+"-collapse")),f(l,"class","accordion-header"),f(l,"id",m=t[4].key),f(u,"class","accordion-body"),f(b,"id",c=""+(t[4].key+"-collapse")),f(b,"class","accordion-collapse collapse"),f(b,"aria-labelledby",r=t[4].key),f(b,"data-bs-parent","#filters"),f(e,"class","accordion-item")},m(h,k){C(h,e,k),g(e,l),g(l,n),g(n,o),g(e,p),g(e,b),g(b,u);for(let w=0;w<i.length;w+=1)i[w].m(u,null);g(e,v)},p(h,k){if(k&1&&s!==(s=h[4].name+"")&&N(o,s),k&1&&a!==(a="#"+h[4].key+"-collapse")&&f(n,"data-bs-target",a),k&1&&_!==(_=""+(h[4].key+"-collapse"))&&f(n,"aria-controls",_),k&1&&m!==(m=h[4].key)&&f(l,"id",m),k&3){d=h[4].values;let w;for(w=0;w<d.length;w+=1){let O=ve(h,d,w);i[w]?i[w].p(O,k):(i[w]=ye(O),i[w].c(),i[w].m(u,null))}for(;w<i.length;w+=1)i[w].d(1);i.length=d.length}k&1&&c!==(c=""+(h[4].key+"-collapse"))&&f(b,"id",c),k&1&&r!==(r=h[4].key)&&f(b,"aria-labelledby",r)},d(h){h&&$(e),B(i,h)}}}function Ke(t){let e,l=t[0],n=[];for(let s=0;s<l.length;s+=1)n[s]=we(ke(t,l,s));return{c(){e=y("form");for(let s=0;s<n.length;s+=1)n[s].c();f(e,"class","accordion mb-3"),f(e,"id","filters")},m(s,o){C(s,e,o);for(let a=0;a<n.length;a+=1)n[a].m(e,null)},p(s,[o]){if(o&3){l=s[0];let a;for(a=0;a<l.length;a+=1){let _=ke(s,l,a);n[a]?n[a].p(_,o):(n[a]=we(_),n[a].c(),n[a].m(e,null))}for(;a<n.length;a+=1)n[a].d(1);n.length=l.length}},i:S,o:S,d(s){s&&$(e),B(n,s)}}}function We(t,e,l){let{data:n}=e,s=se();function o(_){s("message",{key:_})}let a=_=>o(_.queryName);return t.$$set=_=>{"data"in _&&l(0,n=_.data)},[n,o,a]}var $e=class extends T{constructor(e){super();U(this,e,We,Ke,M,{data:0})}},Ce=$e;function Xe(t){let e,l,n,s=t[0].name+"",o,a,_,m=t[0].citation+"",p,b,u,c=t[0].description+"",r,v,d,i,h,k,w,O=t[0].global_id+"",te;return{c(){e=y("div"),l=y("div"),n=y("h5"),o=E(s),a=j(),_=y("h6"),p=E(m),b=j(),u=y("p"),r=E(c),v=j(),d=y("a"),i=E("View"),k=j(),w=y("div"),te=E(O),f(n,"class","card-title"),f(_,"class","card-subtitle mb-3 text-muted"),f(u,"class","card-text"),f(d,"href",h=t[0].url),f(d,"class","btn btn-primary"),f(l,"class","card-body"),f(w,"class","card-footer text-muted"),f(e,"class","card")},m(q,z){C(q,e,z),g(e,l),g(l,n),g(n,o),g(l,a),g(l,_),g(_,p),g(l,b),g(l,u),g(u,r),g(l,v),g(l,d),g(d,i),g(e,k),g(e,w),g(w,te)},p(q,[z]){z&1&&s!==(s=q[0].name+"")&&N(o,s),z&1&&m!==(m=q[0].citation+"")&&N(p,m),z&1&&c!==(c=q[0].description+"")&&N(r,c),z&1&&h!==(h=q[0].url)&&f(d,"href",h),z&1&&O!==(O=q[0].global_id+"")&&N(te,O)},i:S,o:S,d(q){q&&$(e)}}}var je=400;function Ye(t,e,l){let{data:n}=e;return n.description.length>je&&(n.description=`${n.description.slice(0,je).trim()}...`),t.$$set=s=>{"data"in s&&l(0,n=s.data)},[n]}var Ee=class extends T{constructor(e){super();U(this,e,Ye,Xe,M,{data:0})}},Se=Ee;var{Boolean:Ze}=fe;function Ne(t,e,l){let n=t.slice();return n[17]=e[l],n[19]=l,n}function Ae(t,e,l){let n=t.slice();return n[20]=e[l],n}function Fe(t,e,l){let n=t.slice();return n[24]=e[l],n}function Oe(t){let e,l=t[3],n=[];for(let s=0;s<l.length;s+=1)n[s]=Pe(Fe(t,l,s));return{c(){e=y("p");for(let s=0;s<n.length;s+=1)n[s].c();f(e,"class","d-flex flex-wrap"),ne(e,"gap","0.5rem")},m(s,o){C(s,e,o);for(let a=0;a<n.length;a+=1)n[a].m(e,null)},p(s,o){if(o&72){l=s[3];let a;for(a=0;a<l.length;a+=1){let _=Fe(s,l,a);n[a]?n[a].p(_,o):(n[a]=Pe(_),n[a].c(),n[a].m(e,null))}for(;a<n.length;a+=1)n[a].d(1);n.length=l.length}},d(s){s&&$(e),B(n,s)}}}function Pe(t){let e,l=t[24]+"",n,s,o,a,_,m;function p(){return t[10](t[24])}return{c(){e=y("span"),n=E(l),s=j(),o=y("button"),a=j(),f(o,"type","button"),f(o,"class","btn-close btn-close-white ms-1"),f(o,"aria-label","Remove"),f(e,"class","badge bg-secondary rounded-pill")},m(b,u){C(b,e,u),g(e,n),g(e,s),g(e,o),g(e,a),_||(m=F(o,"click",p),_=!0)},p(b,u){t=b,u&8&&l!==(l=t[24]+"")&&N(n,l)},d(b){b&&$(e),_=!1,m()}}}function xe(t){let e,l=t[23]+"",n;return{c(){e=y("p"),n=E(l)},m(s,o){C(s,e,o),g(e,n)},p(s,o){o&16&&l!==(l=s[23]+"")&&N(n,l)},i:S,o:S,d(s){s&&$(e)}}}function et(t){let e,l,n=t[16].itemCount+"",s,o,a,_,m,p,b,u=t[0].params.show_facets&&qe(t),c=t[16].items,r=[];for(let i=0;i<c.length;i+=1)r[i]=De(Ae(t,c,i));let v=i=>P(r[i],1,1,()=>{r[i]=null}),d=t[16].pageCount>1&&Be(t);return{c(){u&&u.c(),e=j(),l=y("p"),s=E(n),o=E(" items"),a=j(),_=y("ul");for(let i=0;i<r.length;i+=1)r[i].c();m=j(),d&&d.c(),p=K(),f(l,"class","mt-5"),f(_,"class","list-unstyled")},m(i,h){u&&u.m(i,h),C(i,e,h),C(i,l,h),g(l,s),g(l,o),C(i,a,h),C(i,_,h);for(let k=0;k<r.length;k+=1)r[k].m(_,null);C(i,m,h),d&&d.m(i,h),C(i,p,h),b=!0},p(i,h){if(i[0].params.show_facets?u?(u.p(i,h),h&1&&A(u,1)):(u=qe(i),u.c(),A(u,1),u.m(e.parentNode,e)):u&&(Q(),P(u,1,1,()=>{u=null}),V()),(!b||h&16)&&n!==(n=i[16].itemCount+"")&&N(s,n),h&16){c=i[16].items;let k;for(k=0;k<c.length;k+=1){let w=Ae(i,c,k);r[k]?(r[k].p(w,h),A(r[k],1)):(r[k]=De(w),r[k].c(),A(r[k],1),r[k].m(_,null))}for(Q(),k=c.length;k<r.length;k+=1)v(k);V()}i[16].pageCount>1?d?d.p(i,h):(d=Be(i),d.c(),d.m(p.parentNode,p)):d&&(d.d(1),d=null)},i(i){if(!b){A(u);for(let h=0;h<c.length;h+=1)A(r[h]);b=!0}},o(i){P(u),r=r.filter(Ze);for(let h=0;h<r.length;h+=1)P(r[h]);b=!1},d(i){u&&u.d(i),i&&$(e),i&&$(l),i&&$(a),i&&$(_),B(r,i),i&&$(m),d&&d.d(i),i&&$(p)}}}function qe(t){let e,l;return e=new Ce({props:{data:t[16].facets}}),e.$on("message",t[7]),{c(){ee(e.$$.fragment)},m(n,s){G(e,n,s),l=!0},p(n,s){let o={};s&16&&(o.data=n[16].facets),e.$set(o)},i(n){l||(A(e.$$.fragment,n),l=!0)},o(n){P(e.$$.fragment,n),l=!1},d(n){H(e,n)}}}function De(t){let e,l,n;return l=new Se({props:{data:t[20]}}),{c(){e=y("li"),ee(l.$$.fragment),f(e,"class","mb-3")},m(s,o){C(s,e,o),G(l,e,null),n=!0},p(s,o){let a={};o&16&&(a.data=s[20]),l.$set(a)},i(s){n||(A(l.$$.fragment,s),n=!0)},o(s){P(l.$$.fragment,s),n=!1},d(s){s&&$(e),H(l)}}}function Be(t){let e,l,n,s,o,a,_,m,p,b,u=Array(t[16].pageCount),c=[];for(let r=0;r<u.length;r+=1)c[r]=Le(Ne(t,u,r));return{c(){e=y("nav"),l=y("ul"),n=y("li"),s=y("a"),s.textContent="Previous",o=j();for(let r=0;r<c.length;r+=1)c[r].c();a=j(),_=y("li"),m=y("a"),m.textContent="Next",f(s,"class","page-link"),f(s,"href","#"),f(n,"class","page-item"),L(n,"disabled",t[1]<=0),f(m,"class","page-link"),f(m,"href","#"),f(_,"class","page-item"),L(_,"disabled",t[1]>=t[16].pageCount-1),f(l,"class","pagination"),f(e,"class","overflow-auto")},m(r,v){C(r,e,v),g(e,l),g(l,n),g(n,s),g(l,o);for(let d=0;d<c.length;d+=1)c[d].m(l,null);g(l,a),g(l,_),g(_,m),p||(b=[F(s,"click",t[11]),F(m,"click",t[13])],p=!0)},p(r,v){if(v&2&&L(n,"disabled",r[1]<=0),v&18){u=Array(r[16].pageCount);let d;for(d=0;d<u.length;d+=1){let i=Ne(r,u,d);c[d]?c[d].p(i,v):(c[d]=Le(i),c[d].c(),c[d].m(l,a))}for(;d<c.length;d+=1)c[d].d(1);c.length=u.length}v&18&&L(_,"disabled",r[1]>=r[16].pageCount-1)},d(r){r&&$(e),B(c,r),p=!1,D(b)}}}function Le(t){let e,l,n=t[19]+1+"",s,o,a;function _(){return t[12](t[19])}return{c(){e=y("li"),l=y("a"),s=E(n),f(l,"class","page-link"),f(l,"href","#"),f(e,"class","page-item"),L(e,"active",t[1]===t[19])},m(m,p){C(m,e,p),g(e,l),g(l,s),o||(a=F(l,"click",_),o=!0)},p(m,p){t=m,p&2&&L(e,"active",t[1]===t[19])},d(m){m&&$(e),o=!1,a()}}}function tt(t){let e;return{c(){e=y("div"),f(e,"class","spinner-border text-primary mb-3")},m(l,n){C(l,e,n)},p:S,i:S,o:S,d(l){l&&$(e)}}}function lt(t){let e,l,n,s,o,a,_,m,p,b,u,c=t[3].length>=1&&Oe(t),r={ctx:t,current:null,token:null,hasCatch:!0,pending:tt,then:et,catch:xe,value:16,error:23,blocks:[,,,]};return x(m=t[4],r),{c(){e=y("form"),l=y("input"),n=j(),s=y("button"),s.textContent="Search",o=j(),c&&c.c(),a=j(),_=K(),r.block.c(),f(l,"class","form-control"),f(l,"type","text"),f(l,"placeholder","Search..."),f(s,"class","btn btn-primary"),f(e,"class","input-group input-group-lg mb-3")},m(v,d){C(v,e,d),g(e,l),W(l,t[2]),g(e,n),g(e,s),C(v,o,d),c&&c.m(v,d),C(v,a,d),C(v,_,d),r.block.m(v,r.anchor=d),r.mount=()=>_.parentNode,r.anchor=_,p=!0,b||(u=[F(l,"input",t[9]),F(e,"submit",le(t[5]))],b=!0)},p(v,[d]){t=v,d&4&&l.value!==t[2]&&W(l,t[2]),t[3].length>=1?c?c.p(t,d):(c=Oe(t),c.c(),c.m(a.parentNode,a)):c&&(c.d(1),c=null),r.ctx=t,d&16&&m!==(m=t[4])&&x(m,r)||ue(r,t,d)},i(v){p||(A(r.block),p=!0)},o(v){for(let d=0;d<3;d+=1){let i=r.blocks[d];P(i)}p=!1},d(v){v&&$(e),v&&$(o),c&&c.d(v),v&&$(a),v&&$(_),r.block.d(v),r.token=null,r=null,b=!1,D(u)}}}function nt(t,e,l){let n,{settings:s}=e,o=new be(s.domain,s.params);function a(){l(1,r=0),l(8,b=[...c,u].filter(Boolean).join(" AND "))}function _(w){l(3,c=[...c,w]),a()}function m(w){l(3,c=c.filter(O=>O!==w)),a()}function p(w){_(w.detail.key)}let b="",u="",c=[],r=0;function v(){u=this.value,l(2,u)}let d=w=>m(w),i=()=>l(1,r-=1),h=w=>l(1,r=w),k=()=>l(1,r+=1);return t.$$set=w=>{"settings"in w&&l(0,s=w.settings)},t.$$.update=()=>{if(t.$$.dirty&258){e:l(4,n=o.getItems(b,r))}},[s,r,u,c,n,a,m,p,b,v,d,i,h,k]}var Ie=class extends T{constructor(e){super();U(this,e,nt,lt,M,{settings:0})}},Te=Ie;function st(t,e){new Te({target:t,props:{settings:e}})}var at=st;export{at as default};
